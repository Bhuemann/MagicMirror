<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0">
    <title>MagicMirror Calendar</title>
    <link href="http://fonts.googleapis.com/css?family=Montserrat:400,700,inherit,400" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="css/standardize.css">
    <link rel="stylesheet" href="css/calendar.css">


  <style>
    .calendar{
      text-align: center;
      margin:0 auto;
    }


  </style>

</head>
<body class="body">
  <div class="col-xs-6 col-xs-offset-3">
    <div class = "calendar" >
      <iframe src="https://calendar.google.com/calendar/embed?showTitle=0&amp;showNav=0&amp;showPrint=0&amp;showTabs=0&amp;height=300&amp;wkst=1&amp;bgcolor=%23FFFFFF&amp;src=en.usa%23holiday%40group.v.calendar.google.com&amp;color=%23691426&amp;ctz=America%2FNew_York" style="border:solid 1px #777" width="1000" height="500" frameborder="0" scrolling="no"></iframe>
    </div>
    <a class="btn btn-primary" href="./index.html">Home </a>  
  </div>
  <div></div>
</body>

<!-- Files for the gesture control -->
  <script src="js/mootools.js"></script>
  <script src="js/Moousture.js"></script>
  <script src="js/LevenMatcher.js"></script>
  <script src="js/JaroMatcher.js"></script>


  <!-- this could be its own JS file. If you guys want I could switch it up -->
  <script>
  
    var selInfo = null;
    var monitor = null;
    var probe = null;
    var recorder = null;
    
    function goBack(error){
    // COMMENT OUT THIS LINE BELOW TO REMOVE THE TEXT
    $('errors').set('html', 'Your Gestures error: ' +error);
    // The error value determains the strickness to the gesture
    if (error <= .25) {
      document.location.href = '/index.html';
    }
    
    }
  
  function startListening(e){
    // COMMENT THESE "SET" functions out to remove the text
    $('status').set('html', 'Recording your movements..');
    $('errors').set('html', '');
    monitor.start(probe, recorder);
    e.stop();
  }
  
  function stopListening(e){
    // COMMENT OUT THIS LINE BELOW TO REMOVE THE TEXT
    $('status').set('html', 'Stopped.');
    monitor.stop();
    monitor.match();
    e.stop();
  }
  
  function showOverlay(){
    var elm = new Element('div', {
                'styles': {
                  'position': 'absolute',
                  'top': 0,
                  'left': 0,
                  'width': '100%',
                  'height': $(document.body).getCoordinates().height,
                  'opacity': '0.5',
                  'backgroundColor': 'black'
                },
                'id': 'overlayDiv'
              });
              
    $(elm).inject($(document.body));
  }
  
  function hideOverlay(){
    $('overlayDiv').dispose();
  }
  /*
  function keyPressed(ev){
    $('status').set('html', 'key pressed:'+ev.code);
    if(ev.code === 17){
      if($('overlayDiv'))
        return;
      showOverlay();
      startListening(ev);
    }
  }
  
  function keyReleased(ev){
    $('status').set('html', 'key released:'+ev.code);
    if(ev.code === 17){
      if(!$('overlayDiv'))
        return;
      hideOverlay();
      stopListening(ev);
    }
  } */
  
    function domReadyHook(){
        gstr = new Moousture.JaroMatcher({reduceConsistency: 1});
      probe = new Moousture.MouseProbe($(document));
      recorder = new Moousture.Recorder({maxSteps: 100, minSteps: 4, matcher: gstr});
      monitor = new Moousture.ManualMonitor(20, 4);
      // This command determains the gesture that we want
      /******************************************************
      
      This is the direction encoding for the gestures

                              6
                              ^
                        5     !      7
                         \    !     /
                          \ ***** /
                    4---   *******  --- 0
                            *****
                              !
                          /   !   \
                         /   *v*   \
                        3     2     1
      *******************************************/

      gstr.addGesture([2,3,5,6], goBack);
        
    $(document).addEvent('mousedown', startListening );
    $(document).addEvent('mouseup', stopListening );
    
    $(document).addEvent('keydown', keyPressed);
    $(document).addEvent('keyup', keyReleased);
    }
    window.addEvent( 'domready', domReadyHook );
  </script>
</head>


<body>
<!-- this should provide you with notes on your attempt to go back -->

<!-- COMMENT THE TEXT OUT, OR CHANGE MESSAGE -->
<div id="status">Make a U gesture in the background to go back to the main page</div>
<div id="errors"></div>

</body>
</html>
  